# apiVersion: external-secrets.io/v1beta1
# kind: ClusterSecretStore
# metadata:
#   name: vault-generic
# spec:
#   provider:
#     vault:
#       server: "https://vault.jtcressy.net"
#       path: "generic"
#       version: "v2"
#       auth:
#         kubernetes:
#           mountPath: "kubernetes"
#           role: "tailnet-microk8s"
---
apiVersion: external-secrets.io/v1beta1
kind: ClusterSecretStore
metadata:
  name: onepassword
spec:
  provider:
    onepassword:
      connectHost: http://onepassword-connect:8080
      vaults:
        jtcressy-net-infra: 1
        shared: 2
      auth:
        secretRef:
          connectTokenSecretRef:
            name: op-credentials
            key: eso-token
